--- libmovtar-0.1.3/movtar_play.c.orig	Fri Jul 13 23:38:03 2001
+++ libmovtar-0.1.3/movtar_play.c	Sat Dec 21 17:51:50 2002
@@ -12,10 +12,6 @@
 #include <SDL/SDL.h>
 #include <SDL/SDL_timer.h>
 
-#ifndef IRIX
-#define JPEG_INTERNALS
-#include <jinclude.h>
-#endif
 #include <jpeglib.h>
 
 #include <glib.h>
@@ -579,7 +575,7 @@
     case 2:
 #ifndef IRIX
       cconvert = cinfo.cconvert;
-      cconvert->color_convert = ycc_rgb16_convert_mmx;
+      //cconvert->color_convert = ycc_rgb16_convert_mmx;  // where is CPU detection?
 #else
       fprintf(stderr, "15/16 bits per pixel can't be decoded by libjpeg on IRIX!");
 #endif
--- libmovtar-0.1.3/configure.in.orig	Sat Apr 27 23:57:49 2002
+++ libmovtar-0.1.3/configure.in	Sat Dec 21 18:11:56 2002
@@ -47,8 +47,7 @@
    echo Activating IRIX changes !
    CFLAGS="$CFLAGS -DIRIX -DWORD_BIGENDIAN";;
   i?86*) 
-   echo Activating Intel MMX !
-   RTJPEG_MMX="-DMMX";;
+   AC_ARG_WITH(mmx, [  --with-mmx  Use MMX in RTjpeg (no)], RTJPEG_MMX="-DMMX", RTJPEG_MMX="");;
 esac
 
 dnl madmac/gernot: 
